{% if n is not defined %}
{% set n = 0 %}
{% endif %}
{% for elemento in menu.elemento %}
    {% if elemento.submenu %}
        {% if n == 0 %}
        <li class="dropdown"><a href="#" class="dropdown-toggle menu" data-toggle="dropdown">{{ elemento.titulo }} <strong class="caret"></strong></a>
            <ul class="dropdown-menu" role="menu">
                {% include "CaiFrontendBundle:menu:submenu.html.twig" with {'menu': elemento.submenu, 'n': n + 1} %}
            </ul>
        </li>
        {% else %}
            <li>
                <a class="trigger right-caret menu">{{ elemento.titulo }}</a>
                <ul class="dropdown-menu sub-menu">
                    {% include "CaiFrontendBundle:menu:submenu.html.twig" with {'menu': elemento.submenu, 'n': n + 1} %}
                </ul>
            </li>
        {% endif %}
    {% else %}
        <li>
            <a class="menu" href="{{ elemento.path }}">{{ elemento.titulo }}</a>
        </li>
    {% endif %}
{% endfor %}
